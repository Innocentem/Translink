{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Browse Trucks and Cargo</h2>

    <!-- Truck Listings -->
    <h3>Available Trucks</h3>
    <div class="row">
        {% for truck in trucks.items %}
        <div class="col-md-4">
            <div class="card mb-3">
                <!-- Truck Image -->
                <img src="{{ url_for('static', filename='uploads/' + truck.image) if truck.image else url_for('static', filename='default_truck.jpg') }}" 
                     class="card-img-top" alt="Truck Image">

                <div class="card-body">
                    <h5 class="card-title">{{ truck.name }}</h5>
                    <p><strong>Routes:</strong> {{ truck.routes }}</p>
                    
                    <!-- Availability Badge -->
                    <span class="badge {{ 'bg-success' if truck.available else 'bg-danger' }}">
                        {{ 'Available' if truck.available else 'Booked' }}
                    </span>
                </div>
            </div>
        </div>
        {% else %}
        <p>No trucks available.</p>
        {% endfor %}
    </div>

    <!-- Pagination for Trucks -->
    <div class="d-flex justify-content-between mt-4">
        {% if trucks.has_prev %}
        <a href="{{ url_for('browse', truck_page=trucks.prev_num, cargo_page=cargo.page, search=search_query, truck_status=truck_status, cargo_status=cargo_status) }}" class="btn btn-primary">Previous</a>
        {% endif %}
        
        {% if trucks.has_next %}
        <a href="{{ url_for('browse', truck_page=trucks.next_num, cargo_page=cargo.page, search=search_query, truck_status=truck_status, cargo_status=cargo_status) }}" class="btn btn-secondary">Next</a>
        {% endif %}
    </div>

    <!-- Cargo Listings -->
    <h3 class="mt-5">Available Cargo</h3>
    <div class="row">
        {% for item in cargo.items %}
        <div class="col-md-4">
            <div class="card mb-3">
                <!-- Cargo Image -->
                <img src="{{ url_for('static', filename='uploads/' + item.image) if item.image else url_for('static', filename='default_cargo.jpg') }}" 
                     class="card-img-top" alt="Cargo Image">

                <div class="card-body">
                    <h5 class="card-title">{{ item.name }}</h5>
                    <p><strong>Origin:</strong> {{ item.origin }}</p>
                    <p><strong>Weight:</strong> {{ item.weight }} kg</p>
                    
                    <!-- Route for cargo -->
                    <p><strong>Route:</strong> {{ item.route }}</p>  <!-- Display the route -->

                    <!-- Cargo Status Badge -->
                    <span class="badge {{ 'bg-success' if item.status == 'Available' else 'bg-danger' }}">
                        {{ 'Available' if item.status == 'Available' else 'Transported' }}
                    </span>
                </div>
            </div>
        </div>
        {% else %}
        <p>No cargo available.</p>
        {% endfor %}
    </div>

    <!-- Pagination for Cargo -->
    <div class="d-flex justify-content-between mt-4">
        {% if cargo.has_prev %}
        <a href="{{ url_for('browse', cargo_page=cargo.prev_num, truck_page=trucks.page, search=search_query, truck_status=truck_status, cargo_status=cargo_status) }}" class="btn btn-primary">Previous</a>
        {% endif %}
        
        {% if cargo.has_next %}
        <a href="{{ url_for('browse', cargo_page=cargo.next_num, truck_page=trucks.page, search=search_query, truck_status=truck_status, cargo_status=cargo_status) }}" class="btn btn-secondary">Next</a>
        {% endif %}
    </div>

</div>
{% endblock %}
